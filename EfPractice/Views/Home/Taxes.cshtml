@model EfPractice.Models.TaxViewModel
<div class="container">
	<div class="card card-add mb-3">
		<div class="card-body">
			<div class="d-sm-flex align-items-center mb-4"><h4 class="card-title mb-sm-0">Tax</h4></div>
			<form asp-action="Taxes" method="post" class="row g-3" autocomplete="off">
				<input type="hidden" asp-for="Tax.Id" />
				<div class="col-md-2">
					<label asp-for="Tax.Code" class="form-label"></label>
					<input asp-for="Tax.Code" class="form-control" />
					<span asp-validation-for="Tax.Code" class="text-danger"></span>
				</div>
				<div class="col-md-3">
					<label asp-for="Tax.Name" class="form-label"></label>
					<input asp-for="Tax.Name" class="form-control" />
					<span asp-validation-for="Tax.Name" class="text-danger"></span>
				</div>
				<div class="col-md-2">
					<label asp-for="Tax.DefaultRate" class="form-label">Default Rate</label>
					<input asp-for="Tax.DefaultRate" class="form-control" />
				</div>
				<div class="col-md-2">
					<label asp-for="Tax.DefaultRateType" class="form-label">Default Rate Type</label>
					<select asp-for="Tax.DefaultRateType" class="form-select"><option value="Percentage">Percentage</option><option value="Fixed">Fixed</option></select>
				</div>
				<div class="col-md-3">
					<label asp-for="Tax.TaxType" class="form-label">Tax Type</label>
					<select asp-for="Tax.TaxType" class="form-select"><option value="GST">GST</option><option value="VAT">VAT</option><option value="SalesTax">Sales Tax</option></select>
				</div>
				<div class="col-md-3">
					<label asp-for="Tax.SalesAccountHeadId" class="form-label">Sales Head</label>
					<select asp-for="Tax.SalesAccountHeadId" class="form-select" asp-items="@(new SelectList(Model.Accounts, "Id", "AccountTitle"))"><option value="">-- select --</option></select>
				</div>
				<div class="col-md-3">
					<label asp-for="Tax.PurchaseAccountHeadId" class="form-label">Purchase Head</label>
					<select asp-for="Tax.PurchaseAccountHeadId" class="form-select" asp-items="@(new SelectList(Model.Accounts, "Id", "AccountTitle"))"><option value="">-- select --</option></select>
				</div>
				<div class="col-md-2 form-check pt-4">
					<input class="form-check-input" asp-for="Tax.Active" />
					<label class="form-check-label" asp-for="Tax.Active">Active</label>
				</div>
				<div class="col-12">
					<button type="submit" class="btn btn-primary">@(Model.Tax.Id == 0 ? "Add" : "Update")</button>
					<a asp-action="Taxes" class="btn btn-secondary">Clear</a>
				</div>
			</form>
		</div>
	</div>
	<div class="card">
		<div class="card-body">
			<div class="d-sm-flex align-items-center mb-4"><h4 class="card-title mb-sm-0">Tax List</h4></div>
			@if (Model.Taxes?.Any() == true)
			{
				<table class="table">
                    <thead ><tr><th>Code</th><th>Name</th><th>Default Rate</th><th>Active</th><th>Created By</th><th>Created Date</th><th>Modified By</th><th>Modified Date</th><th style="width:120px;">Actions</th></tr></thead>
					<tbody>
						@foreach (var t in Model.Taxes)
						{
							<tr>
								<td>@t.Code</td><td>@t.Name</td><td>@t.DefaultRate</td><td>@(t.Active ? "Yes" : "No")</td><td>@t.CreatedBy</td><td>@t.CreatedDate.ToString("yyyy-MM-dd")</td><td>@t.ModifiedBy</td><td>@t.ModifiedDate?.ToString("yyyy-MM-dd")</td>
                                <td class="text-nowrap"><a asp-action="Taxes" asp-route-id="@t.Id" class="btn btn-sm btn-warning">Edit</a><form asp-action="DeleteTax" asp-route-id="@t.Id" method="post" class="d-inline" onsubmit="return confirm('Delete tax?');"><button class="btn btn-sm btn-danger">Delete</button></form></td>
							</tr>
						}
					</tbody>
				</table>
			}
		</div>
	</div>
</div>
<partial name="_ValidationScriptsPartial" />
